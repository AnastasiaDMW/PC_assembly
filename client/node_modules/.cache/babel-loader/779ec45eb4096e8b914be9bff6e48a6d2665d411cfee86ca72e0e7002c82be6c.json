{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\r0dio\\\\WebstormProjects\\\\PC_assembly_software\\\\client\\\\src\\\\components\\\\Profile\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from \"axios\";\nimport '../../modules/scss/favorite_products.scss';\nimport '../../modules/scss/form_profile.scss';\nimport '../../modules/scss/сonfigurations_pc.scss';\nimport '../../modules/scss/profile.scss';\nimport FormProfile from './Form_Profile';\nimport ConfigurationPC from './Configurations_PC';\nimport FavoriteProducts from './Favorite__Products';\nimport change_foto_button from \"../../assets/profile/change_foto_button.svg\";\nimport load_foto_icon from \"../../assets/profile/load_foto_icon.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile({\n  userAuthorize\n}) {\n  _s();\n  const [userEmail, setUserEmail] = useState('');\n  const [userPhoto, setUserPhoto] = useState(\"\");\n  // const [image, setImage] = useState(null);\n  const [userData, setUserData] = useState({\n    id: 0,\n    name: \"\",\n    lastname: \"\",\n    email: \"\",\n    photo: \"\",\n    bonuses: 0,\n    phoneNumber: \"\",\n    assemblies: []\n  });\n  const getUser = async e => {\n    try {\n      const response = await axios.get(\"http://localhost:9090/api/user/user_email\", {\n        params: {\n          email: userEmail\n        }\n      });\n      const user = response.data;\n      setUserData(user);\n      console.log(user);\n    } catch (err) {\n      console.error(\"Ошибка при получении данных\", err);\n    }\n  };\n  useEffect(() => {\n    const storedEmail = localStorage.getItem('userEmail');\n    if (storedEmail) {\n      setUserEmail(storedEmail);\n    }\n  }, []);\n  useEffect(() => {\n    if (userEmail && userData.email === \"\") {\n      getUser();\n    }\n  }, [userEmail]);\n  const handleUserData = user => {\n    localStorage.setItem('userData', user);\n  };\n  useEffect(() => {\n    setUserPhoto(userData.photo);\n    handleUserData(userData);\n  }, [userData]);\n  function checkUserData() {\n    console.log(userEmail);\n    console.log(userData);\n    console.log(userPhoto);\n  }\n  const [image, setImage] = useState(null);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile__left-side\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile__bg-decor--1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile__bg-decor--2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"profile__title\",\n        children: \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FormProfile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ConfigurationPC, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FavoriteProducts, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile__right-side\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile__change-foto\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"\",\n          className: \"profile__change-foto-form\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"profile__change-foto-button\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: event => {\n                setImage(event.target.files[0]);\n              },\n              type: \"file\",\n              className: \"profile__change-foto-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: change_foto_button,\n              alt: \"\",\n              className: \"profile__change-foto-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile__foto-block\",\n        children: [image && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(image),\n          alt: \"\",\n          className: \"profile__foto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this), !image && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: load_foto_icon,\n          alt: \"\",\n          className: \"profile__foto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile__save\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__save__\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__save-button\",\n            onClick: checkUserData,\n            children: [\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 91\n            }, this), \"\\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(Profile, \"wec1fjkLyCVX/LcqXxaoAw3wZCw=\");\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","FormProfile","ConfigurationPC","FavoriteProducts","change_foto_button","load_foto_icon","jsxDEV","_jsxDEV","Profile","userAuthorize","_s","userEmail","setUserEmail","userPhoto","setUserPhoto","userData","setUserData","id","name","lastname","email","photo","bonuses","phoneNumber","assemblies","getUser","e","response","get","params","user","data","console","log","err","error","storedEmail","localStorage","getItem","handleUserData","setItem","checkUserData","image","setImage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","action","onChange","event","target","files","type","src","alt","URL","createObjectURL","onClick","_c","$RefreshReg$"],"sources":["C:/Users/r0dio/WebstormProjects/PC_assembly_software/client/src/components/Profile/Profile.jsx"],"sourcesContent":["import * as React from 'react';\r\nimport {useEffect,useState} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from \"axios\";\r\n\r\nimport '../../modules/scss/favorite_products.scss'\r\nimport '../../modules/scss/form_profile.scss'\r\nimport '../../modules/scss/сonfigurations_pc.scss'\r\nimport '../../modules/scss/profile.scss'\r\n\r\nimport FormProfile from './Form_Profile';\r\nimport ConfigurationPC from './Configurations_PC';\r\nimport FavoriteProducts from './Favorite__Products';\r\n\r\nimport change_foto_button from \"../../assets/profile/change_foto_button.svg\";\r\nimport load_foto_icon from \"../../assets/profile/load_foto_icon.svg\";\r\n\r\nexport default function Profile({userAuthorize}) {\r\n\r\n    const [userEmail, setUserEmail] = useState('');\r\n    const [userPhoto, setUserPhoto] = useState(\"\");\r\n    // const [image, setImage] = useState(null);\r\n    const [userData, setUserData] = useState({\r\n      id: 0,\r\n      name: \"\",\r\n      lastname: \"\",\r\n      email: \"\",\r\n      photo: \"\",\r\n      bonuses: 0,\r\n      phoneNumber: \"\",\r\n      assemblies: []\r\n    })\r\n\r\n    const getUser = async (e) => {\r\n      try {\r\n        const response = await axios.get(\"http://localhost:9090/api/user/user_email\", {\r\n          params: {\r\n            email: userEmail,\r\n          }\r\n        });\r\n        const user = response.data;\r\n        setUserData(user);\r\n        console.log(user)\r\n      } catch (err) {\r\n        console.error(\"Ошибка при получении данных\", err);\r\n      }\r\n    }\r\n\r\n    useEffect(() => {\r\n      const storedEmail = localStorage.getItem('userEmail');\r\n      if (storedEmail) {\r\n        setUserEmail(storedEmail);\r\n      }\r\n    }, []);\r\n    \r\n    useEffect(() => {\r\n      if (userEmail && userData.email === \"\") {\r\n        getUser();\r\n      }\r\n    }, [userEmail]);\r\n\r\n    const handleUserData = (user) => {\r\n      localStorage.setItem('userData', user);\r\n    };\r\n\r\n    useEffect(() => {\r\n      setUserPhoto(userData.photo);\r\n      handleUserData(userData);\r\n    }, [userData]);\r\n\r\n    function checkUserData() {\r\n      console.log(userEmail);\r\n      console.log(userData);\r\n      console.log(userPhoto);\r\n    }\r\n    const [image, setImage] = useState(null);\r\n\r\n    return (\r\n        <main className=\"profile\">\r\n          <div className=\"profile__left-side\">\r\n            <div className=\"profile__bg-decor--1\"></div>\r\n            <div className=\"profile__bg-decor--2\"></div>\r\n            <h2 className=\"profile__title\">Профиль</h2>\r\n            <FormProfile />\r\n            <ConfigurationPC/>\r\n            <FavoriteProducts/>\r\n          </div>\r\n          <div className=\"profile__right-side\">\r\n            <div className='profile__change-foto'>\r\n              <form action=\"\" className=\"profile__change-foto-form\">\r\n\r\n                <label  className='profile__change-foto-button'>\r\n                  <input onChange={(event) => {\r\n                    setImage(event.target.files[0])\r\n                  }}\r\n                    type='file' className='profile__change-foto-input'/>\r\n                  <img src={change_foto_button} alt='' className='profile__change-foto-icon'/>\r\n                </label>\r\n\r\n              </form>\r\n            </div>\r\n\r\n            <div className=\"profile__foto-block\">\r\n              {image && <img src={URL.createObjectURL(image)} alt=\"\" className=\"profile__foto\"/>}\r\n              {!image && <img src={load_foto_icon} alt=\"\" className=\"profile__foto\"/>}\r\n            </div>\r\n\r\n            <div className='profile__save'>\r\n              <div className=\"profile__save__\">\r\n                <button className='profile__save-button' onClick={checkUserData}>Сохранить<br/>изменения</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}